# 360HomesHub

[![Readme was generated by Readmit](https://img.shields.io/badge/Readme%20was%20generated%20by-Readmit-brightred)](https://readmit.vercel.app)

## Project Overview

360HomesHub is a comprehensive web platform designed to connect property hosts with guests, facilitating property listings, bookings, and payments. The platform includes robust user authentication, a guided onboarding process, a detailed property management system, and an administrative dashboard for platform oversight and management.

## Features

*   **Secure User Authentication:**
    *   Multiple registration and login options: Email/Password, Phone/Password, and Google OAuth.
    *   Two-Factor Authentication (2FA) for new registrations and admin logins via OTP (One-Time Password) sent to email (Resend) or phone (Twilio).
    *   JWT (JSON Web Token) for API authentication and session management.
    *   Password setting and reset functionalities.
*   **Guided User Onboarding:**
    *   A structured onboarding flow to collect essential user information, including profile details, location, avatar upload, and role selection (Guest/Host).
*   **Dynamic Property Management:**
    *   Hosts can easily initiate and update property listings through a multi-step onboarding process.
    *   Comprehensive property details management: name, description, type, capacity, number of bedrooms/bathrooms/beds, amenities, house rules, pricing, and availability.
    *   Support for uploading property images and videos to enrich listings.
    *   Advanced property search and filtering capabilities by location (latitude/longitude), keywords, property type, price range, number of bedrooms/bathrooms, booking type, and cancellation policy.
    *   Detailed property view pages displaying all information, including host details and distance calculation.
*   **Flexible Booking System:**
    *   Guests can create booking requests for properties.
    *   Automated calculation of booking costs, including base rent, caution fees, service fees, and taxes.
    *   Hosts can approve or reject pending booking requests.
    *   Guests can view the real-time status of their bookings.
*   **Integrated Payment Gateways:**
    *   Seamless integration with popular payment providers like Paystack and Flutterwave for secure transactions.
    *   Payment checkout initiation and verification processes.
    *   Webhook listeners to handle real-time payment status updates.
*   **KYC (Know Your Customer) Verification:**
    *   A dedicated module for user identity verification, allowing users to submit identity documents (e.g., passport, national ID, driver's license) and selfies for approval.
    *   KYC status tracking for users.
*   **Internal Messaging & Notifications:**
    *   In-app notification system to keep users informed about booking updates, payment confirmations, and system alerts.
    *   Messaging features to facilitate communication between users and administrators.
    *   Tracking of unread messages and notifications.
*   **Comprehensive Admin Dashboard:**
    *   A secure administration portal with dedicated login and OTP verification.
    *   Overview dashboard providing key platform statistics (total users, active listings, bookings, revenue) and action queues for pending tasks (e.g., property reviews, KYC verifications).
    *   User management module for viewing, adding, suspending, and managing user accounts.
    *   Property listing management to review, approve, archive, or reject property listings.
    *   KYC management system for reviewing and approving/rejecting user verification requests.
    *   Financial transactions overview with details on references, users, amounts, gateways, and statuses.
    *   Communication center to send global or targeted in-app notifications and direct messages to users.
    *   Admin role management for defining and assigning permissions to different administrative personnel.
    *   Audit logging to track all administrative actions and system events for security and compliance.

## Stacks / Technologies

| Category      | Technology          | Description                                         |
| :------------ | :------------------ | :-------------------------------------------------- |
| **Backend**   | PHP 8.1+            | Primary scripting language.                         |
|               | MySQL               | Relational database for all platform data.          |
|               | Composer            | PHP dependency management.                          |
|               | Firebase/php-jwt    | JSON Web Token library for authentication.          |
|               | Twilio PHP SDK      | For sending SMS OTPs.                               |
|               | Resend PHP SDK      | For sending Email OTPs and other email notifications. |
|               | Google API Client   | For Google OAuth integration.                       |
|               | PDO                 | PHP Data Objects for secure database interaction.   |
|               | GuzzleHttp          | HTTP client used for API testing.                   |
| **Frontend**  | HTML5, JavaScript   | Standard web technologies for the user interface.   |
| (Admin UI)    | Tailwind CSS        | Utility-first CSS framework for rapid styling.      |
|               | Bootstrap Icons     | Icon library for the admin dashboard.               |
| **Utilities** | Geolocation (PHP)   | Custom utility for distance calculations.           |
|               | File Upload (PHP)   | Custom utility for secure file uploads.             |

## Installation

To set up 360HomesHub locally, follow these steps:

1.  **Clone the repository:**

    ```bash
    git clone https://github.com/your-username/360HomesHub.git
    cd 360HomesHub
    ```

2.  **Install Composer Dependencies:**

    ```bash
    composer install
    ```

3.  **Database Setup:**

    *   Create a MySQL database (e.g., `360homesub`).
    *   Update your database credentials in `config/env.php`. (Copy `config/env.php.example` to `config/env.php` if it doesn't exist).

    ```php
    // config/env.php
    define('DB_HOST', 'localhost');
    define('DB_NAME', '360homesub'); // Your database name
    define('DB_USER', 'root');
    define('DB_PASS', ''); // Your database password
    ```

    *   Run the provided migration scripts to set up the database schema:

    ```bash
    php migrate_audit.php
    php migrate_user_table_v2.php
    php add_payment_columns.php
    php fix_notifications_table.php
    php fix_users_profile_pic.php
    php migrate_notifications.php
    ```
    *(Note: You might need to adjust paths or directly include these files if running from CLI is an issue with your environment setup.)*

4.  **Configure Environment Variables:**

    *   Edit `config/env.php` and fill in your API keys and secrets for:
        *   `JWT_SECRET` (generate a strong random string)
        *   `TWILIO_ACCOUNT_SID`, `TWILIO_AUTH_TOKEN`, `TWILIO_PHONE_NUMBER`
        *   `RESEND_API_KEY`, `RESEND_FROM_EMAIL`
        *   `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`
        *   `PAYSTACK_SECRET_KEY`, `PAYSTACK_PUBLIC_KEY`
        *   `FLUTTERWAVE_SECRET_KEY`

5.  **Web Server Configuration (Apache/Nginx):**

    *   Configure your web server to point the document root to the `public/` directory (if you have one, otherwise it's the root of the project).
    *   Ensure URL rewriting is enabled if using pretty URLs (though the current API seems to use `.php` extensions).
    *   For development, you can use PHP's built-in server:
        ```bash
        php -S localhost:8000
        ```
        Then access `http://localhost:8000/` or `http://localhost:8000/admin/login.php`.

## Usage

### API Endpoints

The core functionalities are exposed through a set of RESTful API endpoints. For detailed API documentation, including request/response formats and authentication requirements, refer to `api/README.md`.

All API requests are made to `https://[YOUR_DOMAIN]/api/` or `http://localhost/360HomesHub/api/` if running locally.

**Authentication:** Most endpoints require a JWT token in the `Authorization: Bearer <your_token>` header. You can obtain a token via the `/api/auth/login.php` or `/api/auth/verify_otp.php` endpoints.

### Admin Dashboard

Access the administrative panel by navigating to `http://localhost/360HomesHub/admin/login.php` (or your domain).
*   **Default Admin Credentials (after running migrations and if seeded):**
    *   Email: `admin@example.com`
    *   Password: `adminpassword` (This will prompt for OTP after initial login for testing)

The admin dashboard provides a centralized interface for:
*   Monitoring platform health and statistics.
*   Managing users (guests, hosts, admins).
*   Reviewing and approving property listings.
*   Overseeing bookings and transactions.
*   Handling KYC verifications.
*   Communicating with users via notifications and messages.
*   Auditing system activities.

## Contributing

Contributions are welcome! If you'd like to contribute, please follow these steps:

1.  Fork the repository.
2.  Create a new branch (`git checkout -b feature/your-feature-name`).
3.  Make your changes and ensure your code adheres to the project's coding standards.
4.  Write or update relevant tests.
5.  Commit your changes (`git commit -m 'Add new feature'`).
6.  Push to the branch (`git push origin feature/your-feature-name`).
7.  Create a Pull Request.

Please ensure your pull request clearly describes the changes and references any related issues.

---
[![Readme was generated by Readmit](https://img.shields.io/badge/Readme%20was%20generated%20by-Readmit-brightred)](https://readmit.vercel.app)